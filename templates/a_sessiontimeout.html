<div id="myModal" class="modal" style="z-index: 2000;">
    <!-- Modal content -->
    <div class="modal-content">
        <div class="modal-header">
            <h3>Session Timeout Notice</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <br>
            <p style="color: black;font-weight: 400;">For your security, your session will time out after 1 minute.<br><br>
            To stay signed in, click the &times; in the corner, or anywhere outside of this window.</p>
            <br>
        </div>
    </div>
    
</div>

<script>
    // https://stackoverflow.com/questions/23023916/how-to-implement-auto-logout-in-javascript
    var logoutWarn = 1000*60*3; // make logout notice appear after 3 minutes
    var logoutNow = 1000*60; // log out 1 minute after notice appears
    
    var warningTimer;
    var timeoutTimer;

    // start the timer for idling
    function startWarningTimer() {
        warningTimer = setTimeout("idleWarning()", logoutWarn);
    }
    // set timer when page is first opened
    startWarningTimer();

    // reset the timers
    function resetTimers() {
        clearTimeout(timeoutTimer);
        startWarningTimer();
    }
    // show modal
    function idleWarning() {
        clearTimeout(warningTimer);
        timeoutTimer = setTimeout("idleLogout()", logoutNow);
        modal.style.display = "block";
    }

    // function to redirect to logout page
    // called 1 minute after modal appears
    var idleLogout = function() {
        window.location.href = '/Logout/';
    }
    
    // function to call when modal is closed
    var logoutModal = function() {
        modal.style.display = "block";
    }
    
    // Get the modal
    var modal = document.getElementById("myModal");
    
    // Get the button that opens the modal
    var btn = document.getElementById("myBtn");
    
    // Get the span element that closes the modal
    var span = document.getElementsByClassName("close")[0];
    
    // When the user clicks on (x), close the modal
    // Reset the logout timer
    span.onclick = function() {
        modal.style.display = "none";
        resetTimers();
    }
    
    // When the user clicks anywhere outside of the modal, close it
    // Reset the logout timer
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
            resetTimers();
        }
    }
    document.onclick= function(event) {
        resetTimers();
    };
</script>